<!--@author Faye Landers
  --@purpose Allow website users to search for a specific plant. Users will click on plant for info.-->
<nav class="navbar navbar navbar-expand-md navbar-dark fixed-top " style="background-color: #3C683C;">
    <a class="navbar-brand" href="/">Flora</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/plantSearch">Plant Search</a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
              Information
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item " href="/watering">Watering</a></li>
              <li><a class="dropdown-item" href="/sunlight">Sunlight</a></li>
              <li><a class="dropdown-item" href="/fertilizer">Fertilizer</a></li>
              <li><a class="dropdown-item" href="/diseases_pests_weeds">Diseases, Pests, and Weeds</a></li>
              <li><a class="dropdown-item" href="/agr_zones">Agricultural Zones</a></li>
              <li><a class = "dropdown-item" href="/companion_planting">Companion Planting</a></li>
              <li><a class= "dropdown-item" href="/composting">Composting</a></li>
            </ul>
   
          </li>
  
  
          <li class="nav-item">
            <a class="nav-link" href="/forum">Forum</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/my_garden">My Garden</a>
          </li>    
          <li class="nav-item">
            <a class="nav-link" href="/journal">Journal</a>
          </li>    
          <li class="nav-item">
            <a class="nav-link" href="/profile">Profile</a>
          </li>    
        </ul>
      </div>  
  </nav>

  <!--Line breaks for spacing-->
  <body>
  <br>
  <br>
  <!--spacing for readability-->

  <div class="overallContainer">
    <div class="headingContainer">
        <h1 class = "subheadLightBlue"> Plants</h1>
    </div>
    <div class="buttonContainer">
        <div>
            <img class="create" id="createPlantButton" src="images/plantSearch/addPlantPlus3.png" alt="New Plant icon">
          </a>
        </div>
    </div> 
  </div>
  
  <br> <!--For Page Spacing-->
  <form>
    <div class="plantSearchBar">
   
    <input type="text" class="plantSearchBar" id="plantSearchBar" placeholder="Search for a plant.." title="Type in a plant">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Search_Icon.svg/750px-Search_Icon.svg.png" " onclick="searchPlantData()">
  </div>

  </form>

  <br>
  <!--Break for spacking-->

  <!--Search Results will appear below this point-->

  <div id="plantData" data-post="<%=plantdata%>">
  </div>

  <div class="plants-wrapper" style="margin: 30px 150px;">
  </div>

  <div class="resultBoxes">
    <h4 id="plantResultName"></h4>
    <br>
    <img class="resultsImg" id ="plantResultIMg">
    <p id="plantResultInfo"></p>
  </div>
  



</body>


  <style>
    .resultBoxes{
      border: 6px solid #365E36; 
      padding: 10px; 
      margin-top: 1%;
      width: 75%;
      margin-left: 10%;
    }
    .resultsImg{
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 50%;
    }
    body{
      background-color: #FAF9F6;
      margin: auto;
    }
  
    h1{
      /*text-align: center;*/
      color: #365E36;
      display: block;
    }
  
    h2{
     /* text-align: center; */
      color: #365E36;
    }
  
    /* unvisited link */
    a:link {
      color: #30007D;
    }
  
    /* visited link */
    a:visited {
      color: #30007D;
    }
  
    /* mouse over link */
    a:hover {
      color: #72418B;
    }
  
    /* selected link */
    a:active {
      color: blue;
    }
  
    hr.dashed { /*dashed border*/
      border-top: 3px dotted #30007D;
    }
  
    .center {
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 50%;
      max-height: 50%;
    }

    /*search bar*/
    .plantSearchBar {
      background: #FAF9F6;  
      height: 32px;
      width: 75%;
      text-align:center;
      display: inline-flex;
      margin-left: 10%;

    }

    .create{ /*create a plant image styling*/
        width: 10%; 
        height: 10%; 
        display: block;
        margin-left: auto;
        margin-right: auto;
        cursor: pointer;
    } 

    .overallContainer{ /*container for heading and add a plant image button*/
      margin-top: 3%; 
      margin-left: 15%; 
      margin-right: 15%; 
      display:inline-block; 
      width: 100%;
    }
    .headingContainer{ /*container for page heading*/
      width: 30%; 
      height: auto; 
      float: left; 
      display:inline-block;
    }
    .buttonContainer{ /*container for add plant button*/
      width: 70%; 
      height: auto; 
      display:inline-block;
    }
        </style>

<script>
  $("#createPlantButton").on("click", () => {
    window.location.href = "/new_plant"; //may need to be changed to reflect create plant in new window
  });
  </script>

<script>
  function searchPlantData()
  {
    var requestedPlantName = document.getElementById("plantSearchBar").value;


    $("#searchedPlants").empty();


    let plantData = $("#plantData").data("plant");


      plantData = plantData.filter(a => {
        //filter by name
      return (//name);
     });
    console.log(plantData);


    for(i = 0; i < plantData.length; i++){
      $("#searchedPlants").append(`<li>${plantData[i].name}</li>`)


    }




    //need to write the route page for this
    $.ajax({
      url:  '/searchPlants',
      type: 'GET',
      data: {plantName},
      success: function(result) {
          console.log("success");
          if(result.error)
          {
            Swal.fire({ //show error alert
            title: "Error",
            text: result.error,
            icon: "error"
          });
            console.log("error");
          }
          else
          {
            window.location.href = "/plantSearch";
          }
      }
    });
  }
  </script>



